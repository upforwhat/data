window.Messenger=function(){function t(t,e){var n="";if(arguments.length<2?n="target error - target and name are both requied":"object"!=typeof t?n="target error - target itself must be window object":"string"!=typeof e&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=t,this.name=e}function e(t,e){this.targets={},this.name=t,this.listenFunc=[],i=e||i,"string"!=typeof i&&(i=i.toString()),this.initListen()}function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function a(t){return n({},t||{})}function r(t){var e=window.location.search,n=e.match(/&*daid=(\d+)&*/),a=e.match(/&*dassclass=(\w+)&*/),r={command:"comforum_adsense",data:{id:n&&n[1]?n[1]:0,cssclass:a&&a[1]?a[1]:"",status:t.result,height:t.height}};return r=JSON.stringify(r)}var i="[PROJECT_NAME]",o="postMessage"in window;t.prototype.send=o?function(t){this.target.postMessage(i+t,"*")}:function(t){var e=window.navigator[i+this.name];if("function"!=typeof e)throw new Error("target callback function is not defined");e(i+t,window)},e.prototype.addTarget=function(e,n){var a=new t(e,n);this.targets[n]=a},e.prototype.initListen=function(){var t=this,e=function(e){"object"==typeof e&&e.data&&(e=e.data),e=e.slice(i.length);for(var n=0;n<t.listenFunc.length;n++)t.listenFunc[n](e)};o?"addEventListener"in document?window.addEventListener("message",e,!1):"attachEvent"in document&&window.attachEvent("onmessage",e):window.navigator[i+this.name]=e},e.prototype.listen=function(t){this.listenFunc.push(t)},e.prototype.clear=function(){this.listenFunc=[]},e.prototype.send=function(t){var e,n=this.targets;for(e in n)n.hasOwnProperty(e)&&n[e].send(t)};var s=new e("adIframe","checkStatus");return s.addTarget(window.parent,"adCenter"),e.success=function(t){s.targets.adCenter.send(r(n(a(t),{result:"success"})))},e.fail=function(t){s.targets.adCenter.send(r(n(a(t),{result:"fail"})))},e}(),window.AdsenseTrack=function(t){var e=function(){var t=location.search,e={};if(-1!=t.indexOf("?"))for(var n=t.substr(1),a=n.split("&"),r=0;r<a.length;r++)e[a[r].split("=")[0]]=a[r].split("=")[1];return e},n=function(t,e,n,a){t&&(t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,a))},a=function(t,e){for(var n=new Array,a=document.getElementsByTagName(t),r="",i=new RegExp("(^|\\s)"+e+"(\\s|$)"),o=0,s=a.length;s>o;o++)r=a[o].className,i.test(r)&&n.push(a[o]);return n},r=r||{};r.stats=r.stats||{},r.stats.track=function(t){if(document.images){var e=new Image;window["bd_pv_"+(new Date).getTime()]=e;var n="http://static.tieba.baidu.com/tb/img/track.gif?",a=[];t.hasOwnProperty("trackUrl")&&(n=t.trackUrl);for(var r in t)t.hasOwnProperty(r)&&"trackUrl"!=r&&a.push(r+"="+encodeURIComponent(t[r]));n+=a.join("&"),e.src=n+"&t="+(new Date).getTime(),e=null}};var i="iframe",o="tbda",s=e(),d=s.dapage||s.da_page||"",c=s.fid||"",u=s.tid||"",f=s.dacuid||"",p=s.dauid||"",l=s.dabaiduid||"",g=(s.datypeid||"",s.daid||s.da_obj_id||""),h=decodeURIComponent(s.daname||""),_=s.dagoodid||s.da_good_id||"",y=decodeURIComponent(s.dafirstname||s.da_first_name||""),m=decodeURIComponent(s.dasecondname||s.da_second_name||""),w=s.dacpid||s.da_cpid||"",b=s.daabtest||s.da_abtest||"",v=s.daprice||s.da_price||"",O=s.daverify||s.da_verify||"",j=s.daextinfo||s.da_ext_info||"",S=s.daplanid||"",x=s.dauserid||"",k=(decodeURIComponent(s.adforumname||""),{client_type:"pc_web",task:o,da_task:o,page:d,da_page:d,locate:i,da_locate:i,da_obj_id:g,fid:c,tid:u,da_good_id:_,da_ext_info:j,da_price:v,da_verify:O,cuid:f,uid:p,baiduid:l,da_obj_name:h,da_first_name:y,da_second_name:m,da_cpid:w,da_abtest:b}),N={trackUrl:"http://tieba.baidu.com/billboard/pushlog/?",da_task:o,da_page:d,da_locate:i,da_client_type:"PC",da_obj_id:g,da_fid:c,da_tid:u,da_good_id:_,da_ext_info:j,da_plan_id:S,da_user_id:x,da_price:v,da_verify:O,da_cuid:f,da_uid:p,da_baiduid:l,da_cpid:w},E=/AppleWebKit.*Mobile/i.test(navigator.userAgent)||/Android/i.test(navigator.userAgent);E&&(k.client_type="wap_smart",N.client_type="WAP");var C=function(t,e){E&&(t.preventDefault?t.preventDefault():t.returnValue=!1,setTimeout(function(){window.open(e.getAttribute("href"),"_parent")},500)),k.type="click",k.da_type="click",r.stats.track(k),N.da_type="click",r.stats.track(N)},T=function(){n(document.getElementsByTagName("body")[0],"click",function(t){t=t||window.event;var e=t.target||t.srcElement,n="",a="";do n=e.tagName,a=e.className;while("A"!==n&&(e=e.parentNode));"A"==n&&/j_tb/.test(a)&&C(t,e)},!1),k.type="show",k.da_type="show",r.stats.track(k),N.da_type="show",r.stats.track(N)},J=0;return n(t,"load",function(){J=1,T("load")},!1),n(t,"pagehide",function(){J=0},!1),n(t,"pageshow",function(){J||T("pageshow")},!1),{addEvent:n,getRequest:e,getTagByClass:a,setupTrack:C,version:"1.0.1"}}(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,a,r,i,o,s=gap,d=e[t];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),"function"==typeof rep&&(d=rep.call(e,t,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(d)){for(i=d.length,n=0;i>n;n+=1)o[n]=str(n,d)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(a=rep[n],r=str(a,d),r&&o.push(quote(a)+(gap?": ":":")+r));else for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(r=str(a,d),r&&o.push(quote(a)+(gap?": ":":")+r));return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var a;if(gap="",indent="","number"==typeof n)for(a=0;n>a;a+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,a,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a=walk(r,n),void 0!==a?r[n]=a:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();